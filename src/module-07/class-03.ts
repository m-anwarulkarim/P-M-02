// =============================================================
// ЁЯМЯ Type Guard in TypeScript
// =============================================================
/*
Type Guard рж╣рж▓рзЛ ржПржоржи ржПржХржЯрж┐ ржЯрзЗржХржирж┐ржХ, ржпрж╛рж░ ржорж╛ржзрзНржпржорзЗ TypeScript-ржХрзЗ ржмрзЛржЭрж╛ржирзЛ рж╣рзЯтАФ
ЁЯСЙ рж░рж╛ржиржЯрж╛ржЗржорзЗ ржХрзЛржи ржнрзЗрж░рж┐рзЯрзЗржмрж▓ ржХрзЛржи ржЯрж╛ржЗржкрзЗрж░ рждрж╛ ржпрж╛ржЪрж╛ржЗ ржХрж░рж╛ред

ржорзВрж▓ ржзрж╛рж░ржгрж╛:
---------
ржЖржорж░рж╛ ржпржЦржи union type (ржпрзЗржоржи: string | number) ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж┐,
рждржЦржи рж╕рж░рж╛рж╕рж░рж┐ ржЕржкрж╛рж░рзЗрж╢ржи ржХрж░рждрзЗ ржЧрзЗрж▓рзЗ TypeScript ржмрзБржЭрждрзЗ ржкрж╛рж░рзЗ ржирж╛ ржХрзЛржиржЯрж╛ ржХрзЛржи ржЯрж╛ржЗржкред

рж╕рзЗржЦрж╛ржирзЗ Type Guard ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЖржорж░рж╛ рж╢рж░рзНржд ржмрж╕рж╛ржЗ:
тЬФ ржпржжрж┐ ржПржЯрж╛ string рж╣рзЯ тЖТ string рж╣рж┐рж╕рзЗржмрзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЛ  
тЬФ ржпржжрж┐ ржПржЯрж╛ number рж╣рзЯ тЖТ number рж╣рж┐рж╕рзЗржмрзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЛ  

Type Guard ржПрж░ ржкрзНрж░ржзрж╛ржи рзи ржзрж░ржирзЗрж░ ржкржжрзНржзрждрж┐:
1я╕ПтГг typeof  
2я╕ПтГг in (property check)
*/

// =============================================================
// тЬЕ 1. Type Guard using typeof
// =============================================================

/*
ЁЯСЙ ржмрзНржпржмрж╣рж╛рж░рзЗрж░ рж╕ржорзЯ:
ржпржЦржи ржкрзНрж░рж┐ржорж┐ржЯрж┐ржн ржЯрж╛ржЗржк ржпрзЗржоржи string, number, boolean ржЖрж▓рж╛ржжрж╛ ржХрж░рждрзЗ рж╣ржмрзЗред

тЬФ typeof ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж▓рзЗ рж░рж╛ржиржЯрж╛ржЗржорзЗ ржЯрж╛ржЗржк ржЪрзЗржХ ржХрж░рж╛ ржпрж╛рзЯред
*/

const typeGuardWithTypeOf = (
  value1: string | number,
  value2: string | number
) => {
  // ЁЯСЙ ржжрзБржЗржЯрж╛ржЗ number рж╣рж▓рзЗ ржпрзЛржЧ (add) ржХрж░рж╛ рж╣ржмрзЗ
  if (typeof value1 === "number" && typeof value2 === "number") {
    return value1 + value2;
  } else {
    // ЁЯСЙ ржЕржирзНржп ржпрзЗржХрзЛржирзЛ ржХрзНрж╖рзЗрждрзНрж░рзЗ string рж╣рж┐рж╕рзЗржмрзЗ concatenate ржХрж░рж╛ рж╣ржмрзЗ
    return value1.toString() + value2.toString();
  }
};

// ржЙржжрж╛рж╣рж░ржг:
// typeGuardWithTypeOf(1, 2) тЖТ 3
// typeGuardWithTypeOf(1, "2") тЖТ "12"
// typeGuardWithTypeOf("1", "2") тЖТ "12"

// =============================================================
// тЬЕ 2. Type Guard using "in"
// =============================================================

/*
ЁЯСЙ ржмрзНржпржмрж╣рж╛рж░рзЗрж░ рж╕ржорзЯ:
ржпржЦржи object-ржПрж░ property ржжрзЗржЦрзЗ ржмрзЛржЭрж╛рж░ ржжрж░ржХрж╛рж░ рж╣рзЯ ржХрзЛржи ржЯрж╛ржЗржк рж╕рзЗржЯрж╛ред

"in" ржЕржкрж╛рж░рзЗржЯрж░ ржжрж┐рзЯрзЗ ржжрзЗржЦрж╛ ржпрж╛рзЯ:
тЬФ ржХрзЛржи ржкрзНрж░ржкрж╛рж░рзНржЯрж┐ object-ржПрж░ ржнрж┐рждрж░рзЗ ржЖржЫрзЗ ржХрж┐ ржирж╛
*/

// ржжрзБржЗ ржзрж░ржирзЗрж░ ржЯрж╛ржЗржк:
type TypeIn1 = {
  name: string;
};

type TypeIn2 = {
  name: string;
  role: "isAdmin"; // extra property
};

const typeGuardWithIn = (user: TypeIn1 | TypeIn2) => {
  // ЁЯСЙ ржпржжрж┐ user-ржПрж░ ржоржзрзНржпрзЗ role property ржерж╛ржХрзЗ,
  //    рждрж╛рж╣рж▓рзЗ ржПржЯрж╛ TypeIn2
  if ("role" in user) {
    return `this is ${user.role}`;
  } else {
    // ЁЯСЙ ржирж╛рж╣рж▓рзЗ ржПржЯрж╛ TypeIn1
    return "no admin";
  }
};

// ржЙржжрж╛рж╣рж░ржг:
console.log(typeGuardWithIn({ name: "admin", role: "isAdmin" }));
// Output: "this is isAdmin"

// =============================================================
// ЁЯФе рж╕рж╛рж░рж╕ржВржХрзНрж╖рзЗржк (Summary)
// =============================================================
/*
тЬФ typeof тЖТ ржкрзНрж░рж┐ржорж┐ржЯрж┐ржн ржЯрж╛ржЗржк ржЪрзЗржХрзЗрж░ ржЬржирзНржп  
тЬФ in тЖТ object-ржПрж░ property ржЖржЫрзЗ ржХрж┐ ржирж╛ ржжрзЗржЦрзЗ ржЯрж╛ржЗржк ржЪрзЗржХ  

Type Guard ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж▓рзЗ:
тЬФ ржХрзЛржб ржмрзЗрж╢рж┐ рж╕рзЗржл рж╣рзЯ  
тЬФ ржЕржпржерж╛ ржЯрж╛ржЗржк ржПрж░рж░ ржЖрж╕рзЗ ржирж╛  
тЬФ рж░рж╛ржиржЯрж╛ржЗржо ржУ ржХржорзНржкрж╛ржЗрж▓ ржЯрж╛ржЗржо тАФ ржжрзБржЗ ржЬрж╛рзЯржЧрж╛рзЯржЗ рж╕ржарж┐ржХржнрж╛ржмрзЗ ржХрж╛ржЬ рж╣рзЯ  
*/
// =============================================================
